Чирков Егор, ИТ-5, Вариант №12

# Игра "Шарики"

## Описание проекта

Этот проект представляет собой простую консольную игру "Шарики", в которой игрок вводит последовательность шариков разных цветов, а программа автоматически уничтожает цепочки из трех и более шариков одного цвета. Игра продолжается до тех пор, пока в линии не останется цепочек, которые можно уничтожить, или пока игрок не выйдет.

## Поставленная задача

Разработать программу, которая:

1.  Позволяет пользователю ввести последовательность цветов шариков (цифры от 0 до 9).
2.  Представляет эту последовательность в виде структуры данных.
3.  Находит и уничтожает цепочки из трех и более шариков одного цвета.
4.  Выводит состояние линии шариков после уничтожения цепочек.
5.  Позволяет сыграть несколько партий.

## Выбранная структура данных

Для представления линии шариков был выбран **односвязный список (`LinkedList`)**.

### Обоснование выбора `LinkedList`:

•   **Динамический размер:** `LinkedList` позволяет легко добавлять и удалять шарики, не требуя предварительного определения размера линии. Это важно, так как игрок может вводить последовательности разной длины.
•   **Эффективное удаление элементов:** Удаление цепочки шариков в `LinkedList` сводится к перестройке ссылок, что более эффективно, чем удаление элементов из массива (где потребовалось бы сдвигать все последующие элементы).
•   **Простота реализации:** Односвязный список – достаточно простая структура данных, что упрощает разработку и отладку.


**Класс `Node`:**

Используется как элементарный блок `LinkedList`, хранит данные о цвете одного шарика (`color`) и указатель на следующий элемент в списке (`next`).

## Алгоритм решения поставленной задачи

Основной алгоритм состоит из следующих этапов:

1.  **Получение данных от пользователя:** Функция `get_valid_input` используется для получения корректных данных от пользователя (количество шариков и их цвета). Эта функция обеспечивает проверку типов данных и их соответствие заданным ограничениям.
2.  **Создание `LinkedList`:** На основе полученных данных создается экземпляр класса `LinkedList`, в который добавляются узлы, представляющие шарики.
3.  **Уничтожение цепочек:** Метод `check_and_destroy()` в классе `LinkedList` выполняет поиск и уничтожение цепочек шариков.
    •   Алгоритм проходит по списку, определяя длину текущей цепочки одинаковых шариков.
    •   Если длина цепочки достигает 3 или более, вызывается метод `destroy_chain()` для удаления цепочки из списка.
    •   Процесс повторяется до тех пор, пока в списке не останется цепочек, которые можно уничтожить.
4.  **Вывод результатов:** После уничтожения цепочек программа выводит количество уничтоженных шариков и текущее состояние линии шариков.
5.  **Повторение игры:** Программа предлагает пользователю сыграть еще раз, возвращаясь к шагу 1.

**Методы `destroy_chain()` и `check_and_destroy()`:**

•   `destroy_chain(start, end)`: Удаляет подцепочку в списке от узла `start` до узла `end`. Корректно обрабатывает случаи удаления в начале, середине и конце списка, а также ситуацию, когда удаляется вся линия.
•   `check_and_destroy()`: Итерируется по списку, выявляя цепочки одинаковых элементов. При нахождении цепочки длиной 3 и более вызывает `destroy_chain()` для её удаления.  Работает до тех пор, пока в списке есть цепочки для удаления.

## Обработка исключений

Обработка исключений используется для обеспечения устойчивости программы к некорректному вводу пользователя.

### Где и почему используется обработка исключений:

•   **Функция `get_valid_input()`:** Внутри этой функции используется блок `try...except` для перехвата исключений, которые могут возникнуть при преобразовании ввода пользователя к нужному типу (`ValueError`, если пользователь ввел не число) или при выполнении функции валидации.  Это необходимо, чтобы предотвратить аварийное завершение программы при некорректном вводе и предоставить пользователю возможность повторить ввод.
•   **Функция `main()`:**  Блок `try...except` охватывает основной код функции `main()` для перехвата любых непредвиденных исключений, которые могут возникнуть во время выполнения программы. Это гарантирует, что даже в случае возникновения ошибки программа не завершится внезапно, а выведет сообщение об ошибке.

## Принципы ООП

В коде используются следующие принципы объектно-ориентированного программирования:

•   **Инкапсуляция:** Данные (цвет шарика, ссылки) и методы для работы с ними (например, `append`, `destroy_chain`) объединены в классах `Node` и `LinkedList`.  Это позволяет скрыть внутреннюю реализацию и предоставить пользователю простой интерфейс для работы с линией шариков.
•   **Абстракция:** Классы `Node` и `LinkedList` предоставляют абстрактное представление о шарике и линии шариков, скрывая детали реализации. Пользователю не нужно знать, как именно реализован односвязный список, чтобы использовать его.
•   **Полиморфизм:** В данном коде напрямую полиморфизм не используется.
•   **Наследование:** В данном коде наследование не используется.

## Заключение

Данная программа представляет собой простую, но функциональную реализацию игры "Шарики". Использование `LinkedList` позволяет эффективно управлять линией шариков, а обработка исключений обеспечивает устойчивость к некорректному вводу.  Код написан с использованием принципов ООП, что делает его понятным и легко модифицируемым.
